function addLog(e,n,a,t){var r=document.createElement("div");e.appendChild(r);var s=index;r.innerHTML=bytes.slice(index,index+a+n).join("-")+" - "+t,r.onclick=function(){selectPacket(s,a+n)},index+=n+a}function selectPacket(e,n){console.log("selectPacket. start: %s, size: %s",e,n),document.getElementById("dlmsPacket").focus(),document.getElementById("dlmsPacket").setSelectionRange(3*e,3*(e+n)-1)}function parse(){var e=document.querySelector("#dlmsPacket").value;index=0,e=e.replace(/\s+/g," "),document.querySelector("#dlmsPacket").value=e,bytes=e.split(/[-_ ]/),console.log("bytes.length: %s",bytes.length);var n=parseInt(bytes[index],16),a=document.createDocumentFragment();parseFuncs[n](a);for(var t=document.querySelector("#log");t.firstChild;)t.removeChild(t.firstChild);t.appendChild(a)}function parseArray(e){var n=document.createElement("div");e.appendChild(n);var a=parseInt(bytes[index+1],16);n.innerHTML=bytes.slice(index,index+2).join("-")+" - Массив размером "+a,index+=2;for(var t=0;a>t;t++){var r=parseInt(bytes[index],16);parseFuncs[r](n)}}function parseStruct(e){var n=document.createElement("div");e.appendChild(n);var a=parseInt(bytes[index+1],16);n.innerHTML=bytes.slice(index,index+2).join("-")+" - Структура размером "+a,index+=2;for(var t=0;a>t;t++){var r=parseInt(bytes[index],16);parseFuncs[r](n)}}function parseInteger32(e){var n=parseInt(bytes[index+1],16);addLog(e,1,4,"Integer32 = "+n)}function parseUnsigned32(e){var n=parseInt(bytes[index+1],16);addLog(e,1,4,"Unsigned32 = "+n)}function parseString(e){var n=parseInt(bytes[index+1],16);addLog(e,2,n,"Строка")}function parseInteger8(e){var n=parseInt(bytes[index+1],16);addLog(e,1,1,"Integer8 = "+n)}function parseInteger16(e){var n=parseInt(bytes[index+1]+bytes[index+2],16);addLog(e,1,2,"Integer16 = "+n)}function parseUnsigned8(e){var n=parseInt(bytes[index+1],16);addLog(e,1,1,"Unsigned8 = "+n)}function parseUnsigned16(e){var n=parseInt(bytes[index+1]+bytes[index+2],16);addLog(e,1,2,"Unsigned16 = "+n)}function parseInteger64(e){var n="hz";addLog(e,1,8,"Integer64 = "+n)}function parseUnsigned64(e){var n="hz";addLog(e,1,8,"Unsigned64 = "+n)}function parseFloat32(e){var n="hz";addLog(e,1,4,"Float32 = "+n)}function parseFloat64(e){var n="hz";addLog(e,1,8,"Float64 = "+n)}function parseDateTime(e){var n="hz";addLog(e,1,12,"DateTime = "+n)}function parseDate(e){var n="hz";addLog(e,1,5,"Date = "+n)}function parseTime(e){var n="hz";addLog(e,1,4,"Time = "+n)}var parseFuncs={1:parseArray,2:parseStruct,5:parseInteger32,6:parseUnsigned32,9:parseString,15:parseInteger8,16:parseInteger16,17:parseUnsigned8,18:parseUnsigned16,20:parseInteger64,21:parseUnsigned64,23:parseFloat32,24:parseFloat64,25:parseDateTime,26:parseDate,27:parseTime},index=0,bytes=[];